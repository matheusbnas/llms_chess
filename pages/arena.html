<!-- Arena de Visualização de Partidas - HTML Clean -->
<link rel="stylesheet" href="/css/arena.css">

<div class="arena-container">
  <!-- Header da Arena -->
  <header class="arena-header">
    <div class="arena-title">
      <i class="fas fa-chess-board"></i>
      <h1>Arena de Partidas</h1>
    </div>
    <div class="arena-subtitle">
      Visualize partidas entre modelos de IA com navegação interativa
    </div>
  </header>

  <!-- Seletor de Partidas -->
  <section class="game-selector">
    <div class="selector-card">
      <div class="selector-header">
        <h3>Selecionar Partida</h3>
      </div>
      
      <div class="selector-controls">
        <div class="selector-group">
          <label for="arena-matchup-select">Confronto</label>
          <select id="arena-matchup-select" class="selector-input">
            <option value="">Carregando confrontos...</option>
          </select>
        </div>
        
        <div class="selector-group">
          <label for="arena-game-select">Partida</label>
          <select id="arena-game-select" class="selector-input" disabled>
            <option value="">Selecione um confronto</option>
          </select>
        </div>
        
        <button id="arena-load-game-btn" class="load-game-btn" disabled>
          <i class="fas fa-eye"></i>
          Visualizar Partida
        </button>
      </div>
    </div>
  </section>

  <!-- Área Principal da Arena (inicialmente oculta) -->
  <main class="arena-main" id="arena-main-content" style="display: none;">

    <div class="game-info-bar">
        <div class="player-info">
          <i class="fas fa-robot player-icon"></i>
          <span id="white-player-name">Brancas</span>
        </div>
        <div class="game-result" id="game-result-display">*</div>
        <div class="player-info">
          <i class="fas fa-robot player-icon"></i>
          <span id="black-player-name">Pretas</span>
        </div>
    </div>

    <!-- Layout Principal: Tabuleiro + Histórico -->
    <div class="arena-layout">
      
      <!-- Área do Tabuleiro -->
      <div class="board-area">
        <div class="chessboard-container">
          <div id="arena-chessboard" class="chessboard"></div>
        </div>
        
        <div class="navigation-controls">
          <button id="arena-pgn-start" class="nav-btn" title="Primeiro lance"><i class="fas fa-fast-backward"></i></button>
          <button id="arena-pgn-back" class="nav-btn" title="Lance anterior"><i class="fas fa-step-backward"></i></button>
          <button id="arena-pgn-play" class="nav-btn play-btn" title="Auto-play"><i class="fas fa-play"></i></button>
          <button id="arena-pgn-next" class="nav-btn" title="Próximo lance"><i class="fas fa-step-forward"></i></button>
          <button id="arena-pgn-end" class="nav-btn" title="Último lance"><i class="fas fa-fast-forward"></i></button>
          <div class="nav-spacer"></div>
          <button id="arena-pgn-flip" class="nav-btn" title="Virar tabuleiro"><i class="fas fa-sync-alt"></i></button>
        </div>
        
        <div class="position-slider-container">
          <span class="slider-label-ext">Início</span>
          <input type="range" id="arena-position-slider" min="0" max="0" value="0" class="slider">
          <span class="slider-label-ext">Fim</span>
        </div>
         <div id="current-position-display" class="slider-label">Lance 0 / 0</div>
      </div>
      
      <!-- Painel Lateral: Histórico de Lances -->
      <div class="side-panel">
        <div class="panel-section">
          <div class="panel-header">
            <h4><i class="fas fa-history"></i> Histórico</h4>
          </div>
          <div class="moves-list" id="arena-moves-list">
             <div class="empty-state">
              <i class="fas fa-chess-pawn"></i>
              <p>Carregue uma partida.</p>
            </div>
          </div>
        </div>
        
        <div class="panel-section">
          <div class="panel-header">
            <h4><i class="fas fa-info-circle"></i> Detalhes</h4>
          </div>
          <div class="game-details" id="game-details-list">
             <!-- Detalhes serão populados via JS -->
          </div>
        </div>
      </div>

    </div>
  </main>
  
  <!-- Estado de Carregamento -->
  <div class="loading-overlay" id="arena-loading-overlay" style="display: none;">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <p>Carregando partida...</p>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="/js/pgn_viewer.js"></script>
<script src="/js/arena.js"></script>